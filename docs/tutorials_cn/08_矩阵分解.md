# 08 矩阵分解（SVD / EVD / QR）

## 总览
- 本库对称分块地执行分解，并在结果张量上追加/安排中间索引，确保收缩回原张量。
- 常用场景：截断（保留 D 或截断误差阈值）、谱分析、正交化。

## SVD（带截断）
```cpp
#include "qlten/qlten.h"
#include "qlten/tensor_manipulation/ten_decomp/ten_svd.h"
using namespace qlten;

QLTensor<QLTEN_Double, special_qn::U1QN> T; // 假设已初始化
QLTensor<QLTEN_Double, special_qn::U1QN> U, S, Vt;
double actual_err; size_t Dkept;

SVD(&T, /*svd_ldims=*/2,
    special_qn::U1QN(0), /*left_div*/
    /*trunc_err=*/1e-8,
    /*Dmin=*/1, /*Dmax=*/256,
    &U, &S, &Vt, &actual_err, &Dkept);
```

- `svd_ldims`：左侧参与矩阵化的轴数。
- `left_div`：左侧目标散度（通常为 0）。
- 截断策略：优先满足误差阈值，再裁剪到 `[Dmin, Dmax]`。

## EVD（特征分解）与 QR
EVD、QR 接口与 SVD 类似，保持索引方向与中间索引约定一致；典型用途：
- EVD：对称/厄米对象的谱分析。
- QR：构造等距映射、预处理。

## 实践建议
- 若后续要收缩回原张量，请遵循分解所得的中间索引方向；不要手动改动方向与顺序。
- 费米张量下，方向与顺序对符号正确性至关重要。

